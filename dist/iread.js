javascript:(function(){function doLongSpeak(e){if(e&&e.split)for(var n=e.split(/[â€”.,?]+/),t=0;t<n.length;t++){var r=new SpeechSynthesisUtterance(n[t]);r.onstart=function(e){console.log("The utterance started to be spoken."),isSpeaking=!0},r.onend=function(e){console.log("The utterance ended."),isSpeaking=!1},r.onerror=function(e){console.log("The utterance has error - "+e),isSpeaking=!1},r.onpause=function(e){console.log("The utterance paused."),isSpeaking=!1},r.onresume=function(e){console.log("The utterance resumed."),isSpeaking=!0},r.onmark=function(e){console.log("The utterance hit a mark.")},r.onboundary=function(e){console.log("The utterance hit a boundary - "+e)},speechSynthesis.speak(r)}}function stopTalking(){for(;speechSynthesis.speaking;)speechSynthesis.cancel()}function selectCrawler(){var e=window.location.href;for(key in crawlers){var n=e.match(new RegExp(key));if(n&&n.length)return crawlers[key]}return null}var embeddedBody='<div id="color-palette">\n    <style type="text/css" media="screen">\n        #color-palette {\n            position: fixed;\n            top: 25%;\n            left: 25%;\n            background-color: white;\n            padding: 20px;\n            border-color: gray;\n            border-style: dashed;\n            width: 50%;\n            height: 50%;\n        }\n        #footer { position: relative; margin: 10px;}\n    </style>\n\n    <div id="close-palette">X</div>\n    Testing yo\n</div>',embeddedScript="/*window.jQuery('#close-palette').click(function(){\n    window.jQuery('#palette-inject').remove();\n});*/",crawlers={};crawlers["reddit.com\\/r\\/.*\\/comments/"]={0:"p.title",1:"div.expando p",2:".commentarea div.md > p"},crawlers["azlyrics.com/lyrics/.*/.*.html"]={0:"div.row > div.text-center > div:eq(6)"},crawlers["medium.com/.*/.*"]={0:"div.section-content"},crawlers["businessinsider.com/.*"]={0:"h1:eq(0)",1:"div.post-content > p"},crawlers["chrome-extension://oemmndcbldboiebfnladdacbdfmadadm/.*"]={0:"div.textLayer"},crawlers["digitaltrends.com/.*/.*/"]={0:"h1",1:"article"},crawlers["file:///.*.pdf"]={0:"div.textLayer"},crawlers["wikipedia.org/wiki/"]={0:"h1",1:"div#content p"},console.log("Reading");var querySelectorAllWithEq=function(e){if(void 0===e)return null;for(var n=[],t=function(t){if(-1===t.indexOf(":eq("))return void 0;var r=t.indexOf(":eq("),i=t.substring(0,r),o=t.substring(r+4,t.indexOf(")",r));e=t.substring(t.indexOf(")",r)+1,t.length),">"===i.charAt(0)&&(i=i.substring(1,i.length)),">"===e.charAt(0)&&(e=e.substring(1,e.length)),n.push({selector:i,index:o})};-1!==e.indexOf(":eq");)t(e);for(var r;n.length>0;){var i=n.shift();r=(r||document).querySelectorAll(i.selector)[i.index]}return e.trim().length>0?(r||document).querySelectorAll(e):[r]};if("undefined"!=typeof _isInjected&&speechSynthesis.speaking)isPaused?(speechSynthesis.resume(),isPaused=!1):(speechSynthesis.pause(),isSpeaking=!1,isPaused=!0);else if(isSpeaking=!1,isPaused=!1,_isInjected=!0,window.getSelection()&&window.getSelection().toString().length){var selectedText=window.getSelection().toString().replace(/\r?\n|\r/gm,"");selectedText&&(stopTalking(),doLongSpeak(selectedText))}else{var crawler=selectCrawler();if(crawler){stopTalking();for(key in crawler)for(var currentSelector=crawler[key],elements=querySelectorAllWithEq(currentSelector),x=0;x<elements.length;x++){var element=elements[x],text=element.textContent;text&&(window.isReading=!0,doLongSpeak(text),isReading=!1)}}else console.log("No matching crawler found")}window.onbeforeunload=function(){stopTalking()};})();